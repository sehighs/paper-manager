# 本地文献与笔记管理器

一个无需后端、可离线使用的本地文献 & 笔记管理器（实际上是“只要是浏览器允许查看的文件类型“就可以方便使用的本地文件管理器）。仅由一份 `HTML` 组成，使用 **Tailwind CSS**（样式）与 **Marked**（Markdown 解析），数据持久化到浏览器 `localStorage`。

因为我的Zotero莫名奇妙不好使，所以我借助GPT-o3干脆自己做了一个！主要就是收藏夹与tag功能，还有很多不足，不过对我个人来说暂时够用了，未来有时间会继续优化，功能具体如下：

## 功能

- **文献管理**
  - 单篇添加：输入相对路径或 URL。
  - 拖拽/批量：拖拽文件或选择**文件夹**批量导入（保留子目录 Tag / 收藏夹）。
  - 右上角按钮：⚙️ 管理（作者、重要度、阅读情况、Tag）、🔗 更新链接、🗑 删除。
  - **去重与路径更新（批量导入）**：遇到**同名文件**时不新增；若路径不同，仅**更新路径**。
- **筛选与搜索**
  - 侧栏 Tag（多选）、收藏夹、作者、重要程度、阅读情况。
  - 顶部搜索：标题 / Tag / 作者关键字。
  - 一键「清除过滤」。
- **收藏夹**
  - 右栏下拉选择；支持 ✎ 重命名、➕ 新建、🗑 删除（删除后文献自动移至“默认”）。
  - 管理模态中也可新增并自动勾选当前文献。
- **Tag 内联编辑**
  - 右侧 Tag 面板开启「✎ 编辑」后，可在胶囊上直接 **重命名 / 删除**。
- **笔记**
  - Markdown 笔记或**文件型笔记**（PDF 等）。
  - 「➕ 关联文献」进入蓝底多选；✅ 完成或 `Enter` 结束关联。
  - 笔记详情页支持 iframe 预览附件或渲染 Markdown。
- **数据持久化**
  - 自动保存到 `localStorage`。
  - 右侧提供「下载数据 / 导入数据」JSON。

> 批量导入默认扩展名：`.pdf` `.doc` `.docx` `.txt` `.md`（可在 `filesAdd()` 的白名单数组里修改）。

## 快速上手

1. 将 `sealist.html` 放到本地工作根目录（如 `学习/`）。
2. 用 Chrome / Edge 等 Chromium 浏览器直接打开，或通过本地服务器打开。
3. 使用方式：
   - 单篇添加：输入 `./相对路径.pdf`（或 URL）→ **添加**。
   - 批量导入：点击 **拖拽/批量** → 拖入文件，或 **选择文件夹** 导入。
   - 过滤：右侧面板 + 顶部搜索组合筛选。
   - 管理：文献卡片区执行 ⚙️ / 🔗 / 🗑。
   - 笔记：新建/编辑/关联文献。

## 目录与路径建议

- 建议把 `sealist.html` 放在工作根目录，文献位于子目录（如 `./21cm/Astro2020/...`），保证相对路径可用。
- 重新导入某子文件夹时：
  - **同名文件**不会重复添加；
  - 若同名文件位置变动，仅**刷新 path**。

## 使用要点

- **搜索**：`Enter` 触发。局部搜索会应用当前过滤器，全局搜索会忽略过滤器。
- **收藏夹**：支持 ✎ 重命名 / ➕ 新建 / 🗑 删除（删除后迁移到“默认”）。
- **Tag 内联编辑**：开启「✎ 编辑」后，胶囊出现删除/改名按钮；失焦或回车保存。
- **更新链接（🔗）**：支持 `./相对路径`、绝对路径（`file:///`、盘符、`/` 开头）和 `http(s)://`。
- **关联模式**：点击「➕ 关联文献」进入蓝底多选；`Enter` 或 ✅ 完成。

## 数据结构（导出 JSON 示例）

```json
{
  "literature": [
    {
      "id": "auto-id",
      "title": "foo.pdf",
      "path": "./21cm/Astro2020/foo.pdf",
      "folders": ["21cm", "Astro2020"],
      "tags": ["21cm", "Astro2020"],
      "author": "HERA",
      "importance": "3",
      "read": "已读"
    }
  ],
  "notes": [
    {
      "id": "note-id",
      "title": "Power Spectrum Notes",
      "type": "markdown",
      "markdown": "....",
      "litIds": ["auto-id"]
    },
    {
      "id": "note-id2",
      "title": "Some PDF",
      "type": "file",
      "path": "./notes/abc.pdf",
      "litIds": []
    }
  ],
  "folders": ["默认", "21cm", "Astro2020"]
}
```

## 兼容性与建议

- 浏览器：推荐 Chromium（Chrome/Edge）；目录选择依赖 `webkitdirectory`。
- 文件访问：`file://` 打开时跨盘/绝对路径可能受限；建议使用**相对路径**并保持目录结构。
- 存储上限：`localStorage` 约 5MB；请定期导出或改造为 IndexedDB。

## 常见问题

1. **批量导入重复？**  
   批量导入以**同名文件**去重并仅更新路径；若仍重复，多为**单篇手动添加**导致（单篇以“标题+路径”判重）。
2. **点不开文件 / 路径错误？**  
   检查 `sealist.html` 与文献目录的相对位置；尽量用 `./` 相对路径；Windows 使用斜杠 `/` 或 `file:///D:/...`。
3. **导入 JSON 报错？**  
   确认顶层键 `literature`、`notes`、`folders` 存在，字段类型正确。
